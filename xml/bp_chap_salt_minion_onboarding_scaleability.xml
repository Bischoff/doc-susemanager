<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet href="urn:x-suse:xslt:profiling:docbook50-profile.xsl"
                 type="text/xml" 
                 title="Profiling step"?>
<!DOCTYPE chapter
[
  <!ENTITY % entities SYSTEM "entity-decl.ent">
    %entities;
]>
<chapter xmlns="http://docbook.org/ns/docbook"
         xmlns:xi="http://www.w3.org/2001/XInclude"
         xmlns:xlink="http://www.w3.org/1999/xlink" version="5.0"
         xml:id="bp.chap.salt.minion.onboard.scaleability">
 <title>Salt Minion Scalability</title>

 <sect1>
  <title>Minions Running with Unaccepted Salt Keys</title>
  <para>
   Minions which have not been on-boarded, (minions running with
   unaccepted Salt keys) consume resources, in particular inbound
   network bandwidth for ~2.5 Kb/s per minion. 1000 idle minions will
   consume around ~2.5 Mb/s, and this number will drop to almost 0 once
   on-boarding has been completed. Limit non-onboarded systems for
   optimal performance.
  </para>

  <para>
   Salt's official documentation suggests the maximum number of opened
   files should be set to at least 2 × the minion count. Current default
   is 16384, which is sufficient for ~8000 minions. For larger
   installations, this number may be increased by editing the following
   line in
   <filename>/usr/lib/systemd/system/salt-master.service</filename>:
  </para>
  <screen>LimitNOFILE=16384</screen>
 </sect1>
</chapter>
