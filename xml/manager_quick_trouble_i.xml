<?xml version="1.0"?>
<?xml-stylesheet href="urn:x-suse:xslt:profiling:novdoc-profile.xsl" 
 type="text/xml"
 title="Profiling step"?>
<!DOCTYPE sect1 PUBLIC
  "-//Novell//DTD NovDoc XML V1.0//EN" "novdocx.dtd"
[
  <!ENTITY % NOVDOC.DEACTIVATE.IDREF "INCLUDE">
  <!ENTITY % entities SYSTEM "entity-decl.ent">
  %entities;
]>
<sect1 id="sec.manager.trouble">
 <title>Installation and Configuration</title>

 <para>
  If you have difficulties deploying the appliance, proceed according to the
  following list.
 </para>

 <sect2 id="sec.manager.trouble.install">
  <title>Installation and Basic Setup</title>
  <variablelist>
   <varlistentry>
    <term>CPU: 64-Bit and Virtualization Support</term>
    <listitem>
     <para>
      For running &susemgr; in a virtual environment you need a machine with
      a recent Linux Kernel on either an Intel processor with VT
      (Virtualization technology) extensions, or an AMD processor with SVM
      extensions (also called AMD-V).
     </para>
     <para>
      Test if your CPU supports hardware virtualization (and which set of
      extensions is used) by executing the following command:
     </para>
<screen>egrep '(vmx|svm)' /proc/cpuinfo</screen>
     <para>
      If this command returns no output, your processor either does not
      support hardware virtualization, or this feature has been disabled in
      the BIOS. Enable virtualization support in the BIOS and try again. If
      in doubt, consult your mainboard manual.
     </para>
     <para>
      If the output contains a <literal>svm</literal> string, your machine
      uses the AMD V extensions, if the output contains a
      <literal>vmx</literal> string, the Intel VT extensions are used.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Database Connection Error</term>
    <listitem>
<!--taroth 2010-12-14: seems this is still valid, re-running setup
      script didn't change anything-->
     <para>
      If the setup script reports a database connection error, check if
      bridged networking is configured correctly on your virtual machine. As
      repairing the current installation will fail after a database
      connection error, fix the network settings in your virtual machine and
      start from scratch with a new &susemgr; image.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Hostname and DNS</term>
    <listitem>
     <para>
      Make sure to fulfill the hostnames and DNS requirements listed in
      <xref linkend="s1-requirements-additional"/>.
     </para>
    </listitem>
   </varlistentry>
<!-- taroth 2011-01-18: commenting the following as it is too specific for
    a Quick Start (only applies to setup with KVM)
    <varlistentry id="vle.trouble.kvm.packages">
    <term>&kvm; Packages</term>
    <listitem>
     <para>If you run &susemgr; in &kvm;, make sure the following packages are installed on the VM host
      server: </para>
     <itemizedlist>
      <listitem>
       <para>
        <systemitem class="resource">kvm</systemitem>
       </para>
      </listitem>
      <listitem>
       <para>
        <systemitem class="resource">virt-manager</systemitem>
       </para>
      </listitem>
      <listitem>
       <para>
        <systemitem class="resource">virt-viewer</systemitem>
       </para>
      </listitem>
      <listitem>
       <para>
        <systemitem class="resource">tunctl</systemitem>
       </para>
      </listitem>
     </itemizedlist>
     <para> If you the install the packages above with &yast; or zypper,
      other required packages are installed automatically due to package
      dependencies. </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>&kvm; Kernel Modules</term>
    <listitem>
     <para>If you run &susemgr; in &kvm;, check with
      <command>lsmod&nbsp;|&nbsp;grep kvm</command> if the &kvm;
      kernel modules are loaded. If not, use <command>modprobe</command> to load
      the respective modules (<systemitem>kvm </systemitem> and
       <systemitem>kvm-amd</systemitem>, or <systemitem>kvm</systemitem> and
       <systemitem>kvm-intel</systemitem>, respectively). To determine which
      modules you need (AMD or Intel), run the virtualization support check (as
      mentioned above) to determine which extensions are used. </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><systemitem>libvirtd</systemitem>
    </term>
    <listitem>
     <para>If you run &susemgr; in &kvm;, make sure
       <systemitem>libvirtd</systemitem> is started at boot time and up and
      running: </para>
     <screen>insserv libvirtd 
rclibvirtd start</screen>
    </listitem>
   </varlistentry>
  -->
  </variablelist>
 </sect2>

 <sect2 id="sec.manager.trouble.config">
  <title>Basic Configuration</title>
  <variablelist>
   <varlistentry>
    <term>Client Is Not Registered</term>
    <listitem>
     <para>
      This is often caused by a missing channel assignment. For example, if
      you want to register a client running a 64-bit version of &sls; 11
      SP1, you need to add one or more channels for that version of &sls; 11
      SP1. Check if the required steps mentioned at the beginning of
      <xref linkend="sec.manager.config"/> have been executed correctly.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Web Interface: Unavailable Functions</term>
    <listitem>
     <para>
      If any functions or entries in the Web interface are not available,
      check if you have the permission to access these functions. &susemgr;
      uses a role-based model for granting permissions. For more
      information, refer to <xref linkend="sec.manager.config.users"/> and
      <xref linkend="sec.manager.config.organizations"/>.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Ports Required for Communication</term>
    <listitem>
     <para>
      The ports required for communication between &susemgr; server,
      &susemgrproxy; server, client systems, and &ncc; are listed in
      <xref linkend="s1-requirements-additional"/>.
     </para>
    </listitem>
   </varlistentry>
  </variablelist>
 </sect2>
 <sect2 id="sec.manager.trouble.mail">
  <title>Mail and Notification Issues</title>
  <indexterm>
   <primary>terms to understand</primary>
   <secondary>traceback email address</secondary>
  </indexterm>

  <!-- https://bugzilla.suse.com/show_bug.cgi?id=933298 -->
  <para>
   If you as the administrator are not receiving mail notification from
   &susemgr;, check and modify the following parameters in
   <filename>/etc/rhn/rhn.conf</filename>:
  </para>

  <variablelist>
   <varlistentry>
    <term>traceback_mail</term>
    <listitem>
     <para>
      Defines the mail address of the system administrator of the
      &susemgr; appliance. This mail address will only be used for
      error/warning/info messages from spacewalk services (java process,
      taskomatic tasks, etc.).
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>web.default_mail_from</term>
    <listitem>
     <para>
      This is the mail address used by &susemgr; to send notification
      mails about error messages and daily status reports.  You can set
      this address that is valid for your organization.
     </para>
    </listitem>
   </varlistentry>
  </variablelist>
 </sect2>
</sect1>
