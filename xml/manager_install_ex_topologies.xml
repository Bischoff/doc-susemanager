<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE chapter
[
  <!ENTITY % entities SYSTEM "entity-decl.ent">
    %entities;
]>
<!-- Converted by suse-upgrade version 1.1 -->

<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" version="5.0" xml:id="ch-example-topologies">
 <title>Example Topologies</title><indexterm>
 <primary>topologies</primary></indexterm>
 <para>
  &susemgr; can be set up in multiple ways, depending on a number of factors
  like the following:
 </para>
 <itemizedlist mark="bullet" spacing="normal">
  <listitem>
   <para>
    the total number of client systems to be served by &susemgr;,
   </para>
  </listitem>
  <listitem>
   <para>
    the maximum number of clients expected to connect
    <emphasis>concurrently</emphasis> to &susemgr;,
   </para>
  </listitem>
  <listitem>
   <para>
    the number of custom packages and channels to be served by &susemgr;,
   </para>
  </listitem>
  <listitem>
   <para>
    the number of &susemgr; servers used in the customer environment,
   </para>
  </listitem>
  <listitem os="hidden">
   <para>
    the number of &susemgr; Proxy servers used in the customer environment.
   </para>
  </listitem>
 </itemizedlist>
 <para>
  In the following, find a simple setup example and two examples
  demonstrating how to effectively balance loads for larger environments.
 </para>
 <sect1 xml:id="s1-example-topologies-simple">
<!-- 5.6: sect-Installation_Guide-Example_Topologies-Single_Satellite_Topology --> 
  <title>Single &susemgr; Topology</title><indexterm>

  <primary>terms to understand</primary>

  <secondary>single &susemgr;</secondary></indexterm>

  <remark role="needinfo">2011-02-28 - ke: This is too vague. Can you provide
   some numbers? - taroth 2011-03-11: asked QA guys about that, see
   [galaxy-devel] - mdejmek: 2011-03-22: still no answer; TODO for next proofing round</remark>
  <remark>emap: example topologies have been dropped upstream. Should we do that too?</remark>
  <para>
   Using a single &susemgr; to serve your entire network is adequate to
   service a medium-sized group of clients. However, performance will be
   compromised if the number of clients requesting packages grows.
  </para>

  <figure xml:id="fig.manager.topology.simple">
   <title>Single &susemgr; Topology</title>
   <mediaobject>
    <imageobject role="html">
     <imagedata fileref="susemanager_topology_single.png" width="700"/>
    </imageobject>
    <imageobject role="fo">
<!-- FIXME toms: width -->
     <imagedata fileref="susemanager_topology_single.png" width="80%"/>
    </imageobject>
   </mediaobject>
  </figure>
 </sect1>
 <sect1 xml:id="s1-example-topologies-twoserver">
  <title>Multiple &susemgr; Servers&mdash;Horizontally Tiered</title><indexterm>

  <primary>terms to understand</primary>

  <secondary>multiple &susemgr; servers horizontally tiered</secondary></indexterm>

  <para>
   For larger networks, distributing the load of client requests becomes
   important. For this purpose, you can use several &susemgr; servers in
   parallel as illustrated in
   <xref linkend="fig.manager.topology.horizontal"/> or a combination of a
   &susemgr; server with several &susemgrproxy; servers to which clients connect directly as shown in
   <xref linkend="fig.manager.toplogy.vertical"/>.
  </para>

  <para>
   It is possible to synchronize content between &susemgr; instances using
   the <command>mgr-exporter</command> and <command>mgr-nnc-sync
   -m</command> commands. This feature is discussed in detail in
   <xref linkend="s1-export-tool"/>.
  </para>

  <figure xml:id="fig.manager.topology.horizontal">
   <title>&susemgr; Servers&mdash;Horizontally Tiered</title>
   <mediaobject>
    <imageobject role="html">
     <imagedata fileref="susemanager_topology_horizontal.png" width="600"/>
    </imageobject>
    <imageobject role="fo">
<!-- FIXME toms: width -->
     <imagedata fileref="susemanager_topology_horizontal.png" width="80%"/>
    </imageobject>
   </mediaobject>
  </figure>

  <para>
   However, using a horizontal structure causes additional maintenance.
  </para>
 </sect1>
 <sect1 xml:id="s1-example-topologies-multiservers">
<!--status="rfc"-->

  <title>&susemgr; with &susemgr; Proxies&mdash;Vertically Tiered</title><indexterm>

  <primary>terms to understand</primary>

  <secondary>&susemgr; and proxies vertically tiered</secondary></indexterm>

  <para>
   An alternative method to balance load is to install &susemgrproxy;
   servers below a &susemgr;. These proxies connect to the &susemgr; server
   for packages from NCC and custom packages created locally. In essence,
   the proxies act as clients of the &susemgr; server.
  </para>

  <para>
   This vertically tiered setup requires that channels and RPMs be created
   only on the &susemgr; server. In this manner, the proxies inherit and
   then serve packages from a central location.
<!--taroth 2011-03-11: commented link because we don't have the guide ATM,
    replace with proper xref when available: 
    For details, refer to the <citetitle>RHN Channel Management Guide</citetitle>.-->
  </para>

  <para>
   The Proxy Servers' SSL certificates should also be set up so that
   the &susemgrproxy; servers become clients of the &susemgr;. These
   Proxy servers should also be set up to serve content to client
   systems simultaneously. This process is described in the <!-- the
   &mgrclientconfguide;; check, whether the following reference is
   meant.  It comes at least close. --> <xref linkend="s1-certificate-configuration"/>.
  </para>

  <figure xml:id="fig.manager.toplogy.vertical">
   <title>&susemgr; with &susemgr; Proxies&mdash;Vertically Tiered</title>
   <mediaobject>
    <imageobject role="html">
     <imagedata fileref="susemanager_topology_vertical.png" width="600"/>
    </imageobject>
    <imageobject role="fo">
<!-- FIXME toms: width -->
     <imagedata fileref="susemanager_topology_vertical.png" width="80%"/>
    </imageobject>
   </mediaobject>
  </figure>
 </sect1>
</chapter>
