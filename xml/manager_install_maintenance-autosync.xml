<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet href="urn:x-suse:xslt:profiling:novdoc-profile.xsl" 
 type="text/xml"
 title="Profiling step"?>
<!DOCTYPE sect1 PUBLIC
  "-//Novell//DTD NovDoc XML V1.0//EN" "novdocx.dtd"
[
  <!ENTITY % NOVDOC.DEACTIVATE.IDREF "INCLUDE">
  <!ENTITY % entities SYSTEM "entity-decl.ent">
  %entities;
]>
<sect1 id="s1-maintenance-auto-sync">
 <!--status="revised"-->
 <title>Automating Synchronization</title><indexterm>

 <primary>automating &susemgr; synchronization</primary></indexterm>
 <indexterm>
  <primary>&susemgr; configuration</primary>
  <secondary>cron job</secondary>
 </indexterm>

 <para>
  Manually synchronizing the &susemgr; repository with &ncc; can be a
  time-consuming task. United States business hours tend to be the peak
  usage time for &ncc; so synchronization at that time may be slow.
  Therefore, &suse; encourages you to automate synchronization at other
  times to better balance load and ensure fast
  synchronization. Continental United States business hours are roughly
  8:00 AM to 9:00 PM EST (UTC -5), due to four time zones, Monday
  through Friday. These hours may vary seasonally by one
  hour. <emphasis>Further, &suse; strongly recommends that
  synchronization occurs randomly for best performance.</emphasis>
 </para>
    
 <para>
  Use a cron job for automatic synchronization by editing the crontab as
  &rootuser;:
 </para>
    
 <screen>crontab -e</screen>
    
 <para>
  This opens the crontab in a text editor.
 </para>
    
 <para>
  Use the first five fields (minute, hour, day, month, and weekday) to
  schedule the synchronization. Remember, hours use the 24-hour format
  (military time). Edit the crontab to include random synchronization:
 </para>
 <!-- bnc#812037 -->
 <screen># connect to customer center every day at random time
# between 03:03 and 05:50
3 3 * * * sleep $[ $RANDOM / 5 ]; /usr/sbin/mgr-ncc-sync &gt;/dev/null \
2&gt;/dev/null</screen>

 <para>
  This particular job will run randomly between 3:03 a.m. and 5:50 a.m.
  system time each night and redirect <literal>stdout</literal> and
  <literal>stderr</literal> from <command>cron</command> to prevent
  duplicating the more readable message from
  <command>mgr-ncc-sync</command>. Options other than
  <option>--email</option> can also be included.
  <!-- Refer to
       <xref linkend="tb-sat-sync-options"/> for the full list of options.-->
  Once you exit the editor, the modified crontab is installed immediately.
 </para>
 <note>
  <title>&scc; with <command>mgr-sync</command></title>
  <para>
   If you already switched to &scc;, use the <command>mgr-sync</command>
   command.
  </para>
 </note>
</sect1>



