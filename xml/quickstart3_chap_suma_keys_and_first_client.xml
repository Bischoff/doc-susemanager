<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet href="urn:x-suse:xslt:profiling:novdoc-profile.xsl" 
 type="text/xml"
 title="Profiling step"?>
<!DOCTYPE chapter PUBLIC
"-//Novell//DTD NovDoc XML V1.0//EN" "novdocx.dtd"
[
  <!ENTITY % NOVDOC.DEACTIVATE.IDREF "INCLUDE">
  <!ENTITY % entities SYSTEM "entity-decl.ent">
  %entities;
]>
<chapter id="preparing.and.registering.clients">
    <title>Preparing and Registering Clients</title>
    <para><?oxy_comment_start author="coyote" timestamp="20151023T162152+0200" comment="This section needs to be clarified. The intro is a little vague"?>
        <?oxy_comment_end?>Client registration with SUSE Manager is executed with a bootstrap script
        on the server which deploys all necessary information to clients. The bootstrap script
        contains parameters which assigns a client system to its base channel. Two of these
        important parameters are:</para>
    <itemizedlist>
        <listitem>
            <para>Activation Keys</para>
        </listitem>
        <listitem>
            <para>GNU Privacy Guard (GPG) Keys</para>

        </listitem>
    </itemizedlist>
    <note>
        <title>GPG Keys</title>
        <para>GPG Keys will not be covered in this guide. For more information see: <ulink url=""
                ><?oxy_custom_start type="oxy_content_highlight" color="255,60,255"?>GPG Keys and
                Bootstrap: Reference
            guide</ulink><?oxy_custom_end?><?oxy_comment_start author="coyote" timestamp="20151023T150256+0200" comment="Add link to reference guide"?></para>
        <?oxy_comment_end?>
    </note>
    <formalpara>
        <title>Activation
            <?oxy_comment_start author="coyote" timestamp="20151023T151635+0200" comment="Re-Work this to better suit entitlements, subscription counts and channels"?>Keys<?oxy_comment_end?></title>
        <para>Activation keys define the number of software entitlements, channels and groups a
            client system is allowed to subscribe to. This information is passed on to all systems
            registered with a key. Each activation key is bound to the organization for which it has
            been created. For this guide you will be using the default SUSE Manager organization
            which includes all software entitlements.</para>
    </formalpara>

    <para>In this chapter you will:</para>
    <orderedlist>
        <listitem>
            <para>Create activation keys for your new client channels</para>
        </listitem>
        <listitem>
            <para>Create a bootstrap repository</para>
        </listitem>
        <listitem>
            <para>Edit your bootstrap script</para>
        </listitem>
        <listitem>
            <para>Connect your clients to &susemgr;</para>
        </listitem>
    </orderedlist>

    <sect1>
        <title>Creating Your Keys</title>
        <para>The following procedure will guide you through creating the activation keys for your
            two test channels.</para>

        <procedure>
            <title>Creating Activation Keys</title>
            <step>
                <para>Log in to the SUSE Manager Web interface as administrator. </para>
            </step>
            <step>
                <para>Switch to the Systems tab and select Activation Keys. </para>
            </step>
            <step>
                <para> Click the Create New Key link at the upper right corner. </para>
                <informalfigure>
                    <mediaobject>
                        <imageobject>
                            <imagedata fileref="quickstart-activationkeys1.png"/>
                        </imageobject>
                    </mediaobject>
                </informalfigure>
            </step>
            <step>
                <para>Enter a Description to identify the generated activation key.</para>
            </step>
            <step>
                <para> Enter a human readable key string value such as: <command>SLES12-SP1
                    </command>. </para>
                <warning>
                    <title>Allowed Characters</title>
                    <para>For all &suse; Products do not use commas within the key string. All other
                        characters are allowed. Red Hat Products require commas. See: Activation
                        Keys and rhnreg_ks: Reference Guide </para>
                </warning>
            </step>
            <step>
                <para>Enter 1 in the <command>Usage:</command> field. This allows one client to
                    register using this key and uses one of your subscription entitlements.</para>
            </step>

            <step>
                <para>Select the &sle; 12 SP1 channel you added earlier from the <command>Base
                        Channels:</command> drop down.</para>
            </step>

            <step>
                <para>Select the virtualization check box as an <command>Add-on
                        entitlement:</command>.</para>
            </step>
            <step>
                <para>Leave the <command>Contact Method:</command> at default.</para>
            </step>
            <step>
                <para>Leave Universal Default unchecked. Click <command>Create Activation
                        key</command> to finish creating the key for the first channel.</para>
                <informalfigure>
                    <mediaobject>
                        <imageobject>
                            <imagedata fileref="quickstart-activationkeys2.png" width="100%"/>
                        </imageobject>
                    </mediaobject>
                </informalfigure>
            </step>
            <step>
                <para>Repeat this procedure from step 2 and create a key for the &sle; 11 SP4
                    channel. The final list of keys should look similar to the following
                    image.</para>
                <informalfigure>
                    <mediaobject>
                        <imageobject>
                            <imagedata fileref="quickstart-activationkeys3.png"/>
                        </imageobject>
                    </mediaobject>
                </informalfigure>
            </step>
        </procedure>

        <para> Proceed to the next section.</para>
    </sect1>
    <sect1>
        <title>Generating a Bootstrap Script</title>
        <para>This section covers the procedure of generating a template bootstrap script which will
            be copied and modified for both of your clients.</para>
        
        <note>
            <title>Bootstrap Scripting Best
                <?oxy_comment_start author="coyote" timestamp="20151023T161448+0200" comment="Add some best practice examples of bootstrapping clients in mass."?>Practices<?oxy_comment_end?></title>
            <para>Many of our customers are using unique methods to register clients for use with
                &susemgr; in mass using bootstrap. Using batch scripts for mass registration of both
                VM and Bare Metal machines is a possibility. Some of these methods will be covered
                in the Best Practice Guide and will be added as examples at a later time.</para>
        </note>

        <para>The following procedure will guide you through generating a bootstrap template script.</para>
        <procedure>
            <title>Creating a Bootstrap Script</title>
            <step>
                <para>On the SUSE Manager Web interface, switch to the <guimenu>Admin</guimenu> tab
                    and select <menuchoice>
                        <guimenu>SUSE Manager Configuration</guimenu>
                        <guimenu>Bootstrap Script.</guimenu>
                    </menuchoice></para>
            </step>
            <step>
                <para>Leave the defaults settings and click the <guimenu>Update</guimenu> button. </para>
                <informalfigure>
                    <mediaobject>
                        <imageobject>
                            <imagedata fileref="quickstart-bootstrap1.png"/>
                        </imageobject>
                    </mediaobject>
                </informalfigure>
            </step>

            <step>
                <para>A template bootstrap script is generated and stored on the server's file
                    system in the <filename>/srv/www/htdocs/pub/bootstrap</filename> directory. </para>
                <informalfigure>
                    <mediaobject>
                        <imageobject>
                            <imagedata fileref="quickstart-bootstrap3.png"/>
                        </imageobject>
                    </mediaobject>
                </informalfigure>

                <para>The bootstrap script is also available from
                        <filename>https://susemanager.example.com/pub/bootstrap/</filename>.</para>
                <informalfigure>
                    <mediaobject>
                        <imageobject>
                            <imagedata fileref="quickstart-bootstrap2.png"/>
                        </imageobject>
                    </mediaobject>
                </informalfigure>
            </step>
        </procedure>
        <para>The next section will cover copying and modifying your bootstrap template for use with
        each client.</para>
    </sect1>
    
    <sect1>
        <title>Modifying the Bootstrap Script</title>
        <para>In this section you will copy and modify the template bootstrap script you created
            from the previous section.</para>
        
    </sect1>
    <sect1>
        <title>Connecting Your First Client</title>
        <para>Connecting the first client.</para>
    </sect1>
</chapter>
