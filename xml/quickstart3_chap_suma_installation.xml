<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet href="urn:x-suse:xslt:profiling:novdoc-profile.xsl" 
 type="text/xml"
 title="Profiling step"?>
<!DOCTYPE chapter PUBLIC
"-//Novell//DTD NovDoc XML V1.0//EN" "novdocx.dtd"
[
  <!ENTITY % NOVDOC.DEACTIVATE.IDREF "INCLUDE">
  <!ENTITY % entities SYSTEM "entity-decl.ent">
  %entities;
]>
<chapter id="sles.installation.within.kvm">
    <title>Constructing the &susemgr; Playground</title>
    <sect1>
        <title>What's Covered Here?</title>

        <para>This chapter provides instruction on installation of &sle; 12 SP1 within KVM as the
            Linux base for a &susemgr; 3 installation within a simple test environment. A kernel
            virtual machine (KVM) combined with Virt-Manager will be used as a safe testing ground
            for your first installation. The following sections will guide you through: </para>

        <itemizedlist>
            <listitem>
                <para>Preparing (KVM) for a &sle; 12 installation</para>
            </listitem>
            <listitem>
                <para>Booting the &sle; 12 SP1 installation using PXE</para>
            </listitem>
        </itemizedlist>

        <important>
            <title>Prerequisites for this Guide</title>
            <para>This section assumes you have already reviewed the <link
                    linkend="suma3.overview.requirements">&susemgr; Overview and Requirements</link>
                section. </para>
        </important>
    </sect1>
    <sect1>
        <title>&sle; 12 SP1 Installation Using KVM and virt-manager</title>
        <para/>

        <procedure>
            <title>Installation using Virtual Machine Manager</title>
            <step>
                <para>Create a new virtual machine with <systemitem>Virtual Machine
                        Manager</systemitem></para>
            </step>
            <step>
                <para>When presented with the <systemitem>New VM</systemitem> dialog box select
                        <systemitem>Network Boot (PXE)</systemitem>. </para>
                <informalfigure>
                    <mediaobject>
                        <imageobject>
                            <imagedata fileref="kvm-setup1.png" width="100%"/>
                        </imageobject>
                    </mediaobject>
                </informalfigure>
            </step>

            <step>
                <para>Select <systemitem>Forward</systemitem> to continue.</para>
            </step>

            <step>
                <para>For the operating system and Version choose <command>Linux</command> and
                        <command>&sle; 12 (or later)</command>. </para>

                <informalfigure>
                    <mediaobject>
                        <imageobject>
                            <imagedata fileref="kvm-setup2.png" width="100%"/>
                        </imageobject>
                    </mediaobject>
                </informalfigure>
            </step>

            <step>
                <para>Select <systemitem>Forward</systemitem> to continue.</para>
            </step>

            <step>
                <para>Set the virtual machine <systemitem>Memory (RAM):</systemitem> to
                        <command>4096 MB </command> and <systemitem>CPUs:</systemitem> to<command>4
                    </command>.</para>

                <informalfigure>
                    <mediaobject>
                        <imageobject>
                            <imagedata fileref="kvm-setup3.png" width="100%"/>
                        </imageobject>
                    </mediaobject>
                </informalfigure>
            </step>
            <step>
                <para>Select <systemitem>Forward</systemitem> to proceed.</para>
            </step>
            <step>
                <para>Select <systemitem>Managed or other existing storage</systemitem> and then
                    Browse.</para>

                <informalfigure>
                    <mediaobject>
                        <imageobject>
                            <imagedata fileref="kvm-setup4.png" width="100%"/>
                        </imageobject>
                    </mediaobject>
                </informalfigure>
            </step>
            <step>
                <para>Select the <systemitem>New Volume</systemitem> button.</para>
                <informalfigure>
                    <mediaobject>
                        <imageobject>
                            <imagedata fileref="kvm-setup5.png" width="100%"/>
                        </imageobject>
                    </mediaobject>
                </informalfigure>
            </step>
            <step>
                <para>For the purposes of this guide you will create a storage device with 200 GB to
                    fulfil &susemgr; space requirements. Name your storage volume
                        <emphasis>suma3-testing</emphasis> and accept the default format of
                        <systemitem>qcow2</systemitem>. Check your local <systemitem>Storage Volume
                        Quota</systemitem> and ensure your local file system can provide the
                    required 200 GB of disk space. Change the default value of <command>8.0
                        GB</command> in the <systemitem>Max Capacity</systemitem> field to
                        <command>200 GB</command>. </para>
                <informalfigure>
                    <mediaobject>
                        <imageobject>
                            <imagedata fileref="kvm-setup6.png" width="100%"/>
                        </imageobject>
                    </mediaobject>
                </informalfigure>
            </step>


            <step>
                <para>Select <systemitem>Finish</systemitem> to proceed.</para>
            </step>

            <step>
                <para>Select <systemitem>Choose Volume</systemitem> to continue.</para>
                <informalfigure>
                    <mediaobject>
                        <imageobject>
                            <imagedata fileref="kvm-setup7.png" width="100%"/>
                        </imageobject>
                    </mediaobject>
                </informalfigure>
            </step>
            <step>
                <para> Select <systemitem>Forward</systemitem> to continue. </para>
                <informalfigure>
                    <mediaobject>
                        <imageobject>
                            <imagedata fileref="kvm-setup8.png" width="100%"/>
                        </imageobject>
                    </mediaobject>
                </informalfigure>
            </step>
            <step>
                <para>Name your virtual machine <emphasis>suma3-testing</emphasis>. </para>
                <informalfigure>
                    <mediaobject>
                        <imageobject>
                            <imagedata fileref="kvm-setup9.png" width="100%"/>
                        </imageobject>
                    </mediaobject>
                </informalfigure>
            </step>

            <step>
                <para>Finalize your virtual machine setup by selecting
                        <systemitem>Finish</systemitem> to proceed with pxe boot and installation of
                    &sle; 12 SP1 RC3</para>
            </step>
        </procedure>
        <para>This completes the construction of your &susemgr; playground. To continue proceed to
            the next section.</para>
    </sect1>

    <sect1>
        <title>PXE Booting &sle; 12</title>
        <para>After selecting the <systemitem>Finish</systemitem> button your new VM will
            automatically boot to the PXE boot menu. The following procedure will guide you through
            selecting the correct installation image during PXE boot. </para>

        <procedure>
            <title>PXE Boot Procedure</title>
            <step>
                <para>Select <systemitem>Unpacked SLE-12 ISOs via SLP</systemitem> press
                        <keycap>Enter</keycap> to continue.</para>
                <informalfigure>
                    <mediaobject>
                        <imageobject>
                            <imagedata fileref="pxeboot2.png" width="100%"/>
                        </imageobject>
                    </mediaobject>
                </informalfigure>
            </step>
            <step>
                <para>Select <systemitem>SLE 12 SP1 Server LATEST x86_64 DVD1</systemitem> press
                        <keycap>Enter</keycap> to continue.</para>
                <informalfigure>
                    <mediaobject>
                        <imageobject>
                            <imagedata fileref="pxeboot3.png" width="100%"/>
                        </imageobject>
                    </mediaobject>
                </informalfigure>
            </step>

        </procedure>

        <para>Installation of &sle; 12 SP1 will begin. For more information on completing an
            installation of &sle; 12 see also: <ulink
                url="https://www.suse.com/documentation/sles-12/book_quickstarts/data/sec_sle_installquick.html"
                >&sle; 12 Quickstart Installation Guide</ulink>
        </para>
        <important>
            <title>Internal Registration Keys</title>
            <para>As this is an internal testing guide for Alpha remember to use the developer
                registration keys during the &sle; 12 SP1 installation for registration with
                &scc;.</para>
        </important>
        <para>Complete the &sle; 12 SP1 installation and then proceed to the next section.</para>
    </sect1>




</chapter>
