<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet href="urn:x-suse:xslt:profiling:docbook50-profile.xsl"
                 type="text/xml" 
                 title="Profiling step"?>
<!DOCTYPE chapter
[
  <!ENTITY % entities SYSTEM "entity-decl.ent">
    %entities;
]>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude"
    xmlns:xlink="http://www.w3.org/1999/xlink" version="5.0" xml:id="bp.lifecycle">


    <title>Advanced Patch Lifecycle Management</title>

    <sect1 xml:id="bp.chap.adv.life.mgr.covered">
        <title>Whats Covered Here?</title>

        <para>This chapter describes how to setup and configure a &susemgr; testing implementation
            to enable companies in the delivery of these often requested features: <itemizedlist>
                <listitem>
                    <para>Automatic creation and archive of patch sets by quarter (or any other time
                        period)</para>
                </listitem>
                <listitem>
                    <para>Consistent method of patch promotion and delivery through numerous
                        landscapes and environments</para>
                </listitem>
                <listitem>
                    <para>Exception process for handling patches that need to be excluded from a
                        patch cycle</para>
                </listitem>
                <listitem>
                    <para>Environment creation with historical patch sets</para>
                </listitem>
                <listitem>
                    <para>Minimal need for host channel subscription manipulation from
                        cradle-to-grave</para>
                </listitem>
                <listitem>
                    <para>Support for service-pack migration using custom child channels</para>
                </listitem>
                <listitem>
                    <para>Provides a foundation for using multiple organizations to maintain
                        systems.</para>
                </listitem>
            </itemizedlist>
        </para>
    </sect1>

    <sect1>
        <title>Assumptions</title>
        <para>This guide covers &susemgr; &productnumber3;. A fresh installation is not required but
            some assumptions are made. You have a working &susemgr; environment, with a few
            registered clients, and a decent knowledge of &susemgr; terms and capabilities. If you
            are unfamiliar with these terms or do not have a current working setup, see the: <link
                linkend="quickstart.chapt.overview.requirements">Getting Started Guide</link></para>
        <note>
            <title>spacecmd and XMLRPC Examples</title>
            <para>Using advanced features such as <systemitem>spacecmd</systemitem> or
                    <systemitem>XMLRPC</systemitem> API will be explained in some detail, but will
                not be exhaustive. Code examples will be included at the end of this chapter which
                may be modified or used as-is. These come with no <emphasis>WARRANTY</emphasis> and
                should not be expected to run with every implementation. <emphasis>Always</emphasis>
                test before running any examples in production.</para>
        </note>
    </sect1>

    <sect1 xml:id="bp.chap.adv.patch.life.mgr.overview">
        <title>Patch Lifecycle Management Overview</title>
        <para>Keeping systems patched and secure remains one of the greatest ongoing challenges
            which you will face as an administrator. Both proprietary and open-source companies are
            constantly working to provide updates which fix flaws discovered within their software
            products.</para>

        <para>Adding to these pressures are requirements imposed by compliance initiatives such as: <itemizedlist>
                <listitem>
                    <para>PCI-DSS (Payment Card Industry Data Security Standard)</para>
                </listitem>
                <listitem>
                    <para>SOX (Sarbanes-Oxley)</para>
                </listitem>
                <listitem>
                    <para>HIPAA (Health Insurance Portability and Accountability Act)</para>
                </listitem>
                <listitem>
                    <para>FIPS 140 (Federal Information Processing Standard)</para>
                </listitem>
            </itemizedlist>Included in most of these standards are rules which dictate frequency and
            time frames required for patching and often these schedules are modified due to the
            severity level of a specific patch.</para>

        <para>Businesses depend upon a changing landscape of applications covering a wide range of
            compute infrastructure. These may include physical and virtual hosts and have
            complicated application stacks. </para>
        <para>These applications may require the following: <itemizedlist>
                <listitem>
                    <para>A specific kernel version</para>
                </listitem>
                <listitem>
                    <para>Strict uptime requirements</para>
                </listitem>
                <listitem>
                    <para>Specific run-time environments, (like Java)</para>
                </listitem>
                <listitem>
                    <para>Specific Linux OS release</para>
                </listitem>
                <listitem>
                    <para>Specific configuration requirements</para>
                </listitem>
                <listitem>
                    <para>Hardening and platform requirements</para>
                </listitem>
                <listitem>
                    <para>Specific software versions</para>
                </listitem>
            </itemizedlist>
        </para>
        <para>Additionally, many companies have created duplicate host environments such as: <itemizedlist>
                <listitem>
                    <para>Production (PROD)</para>
                </listitem>
                <listitem>
                    <para>Development (DEV)</para>
                </listitem>
                <listitem>
                    <para>Quality Assurance (QA)</para>
                </listitem>
                <listitem>
                    <para>User-acceptance/Testing (UAT)</para>
                </listitem>
            </itemizedlist> These landscapes mirror production environments and allow for testing or
            validation of applied changes to a system or set of systems. This means that you are
            required to manage, patch and report on at least one more complete set of hosts. </para>

        <sect2>
            <title>Important Terminology</title>
            <para>The following paragraphs provide an explanation of important terms used throughout
                this chapter.</para>
            <formalpara>
                <title>Landscape</title>
                <para>Describes one of several groups of Linux hosts. This is commonly used with
                    enterprise software deployments as a way to define the role/quality of a host.
                    Examples include, production (PROD), development (DEV), quality-assurance (QA),
                    user-acceptance/testing (UAT), etc.</para>
            </formalpara>
            <formalpara>
                <title>Environment</title>
                <para>Defined as a physical separation of Linux hosts, like Corporate (CORP), or
                    Store (STORE), or NPE (Non-production Environment).</para>
            </formalpara>
            <formalpara>
                <title>Organizations</title>
                <para>Defined as a separate management environment placed under the default
                    organization which is created during initial installation of a SUSE Manager
                    Server. Organizations in SUSE Manager will typically have separate credentials
                    required to administer them via the WebUI and any Linux hosts managed by SUSE
                    Manager will be registered to a single organization and only visible to this
                    organization.</para>
            </formalpara>
        </sect2>
    </sect1>

    <sect1>
        <title>Example Scenario</title>
        <formalpara>
            <title>The Chameleon Corporation</title>
            <para>The world’s largest reptile and amphibian pet store whose headquarters are located
                in Yemen. This corporation has more than 1500 stores operating under the names
                    <emphasis>LizardsRUs</emphasis>, <emphasis>UnVeiledInc</emphasis> and
                    <emphasis>Chameleo-rama</emphasis> in five different countries. Due to
                compliance constraints, their patch lifecycle (both timing and delivery) is based on
                their corporate security policies, host environments, landscapes, and future
                management needs. The Chameleon Corporation must maintain the following requirements
                for managing patch and security updates to their Linux hosts:<itemizedlist>
                    <title>Requirement Summary</title>
                    <listitem>
                        <para>The published Security Policy states: "All Linux systems need to be
                            up-to-date with the latest available updates, bug-fixes and enhancements
                            on a quarterly basis."</para>
                        <para>Quarters are defined as: <itemizedlist>
                                <listitem>
                                    <para>Q1: January 1st through March 31st</para>
                                </listitem>
                                <listitem>
                                    <para>Q2: April 1st through June 30th</para>
                                </listitem>
                                <listitem>
                                    <para>Q3: July 1st through September 30th</para>
                                </listitem>
                                <listitem>
                                    <para>Q4: October 1st through December 31st</para>
                                </listitem>
                            </itemizedlist></para>
                    </listitem>

                    <listitem>
                        <para>The published Security Policy also states the need to patch all Linux
                            systems with “critical” security updates (CVSS score of 7 or greater)
                            within 1 month of release of the patch. This introduces a second
                            schedule that may overlap any existing patch roll-out.</para>
                    </listitem>
                    <listitem>
                        <para>The company has 3 different host environments,
                                <emphasis>Corporate</emphasis>, <emphasis>Store</emphasis> and
                                <emphasis>NPE</emphasis>.These are partitioned using SUSE Manager
                            Organizations. Each SUSE Manager Organization has visibility into the
                            default SUSE Manager Organization’s software channels due to trusts, yet
                            the managed hosts are naturally grouped and managed by their
                            environment.</para>
                    </listitem>
                    <listitem>
                        <para>There are at least 3 landscapes in each environment,
                                <emphasis>PROD</emphasis>,<emphasis>DEV</emphasis>, and
                                <emphasis>UAT</emphasis>.</para>
                    </listitem>
                    <listitem>
                        <para>A “patch exceptions" process exists, as there is often a need to
                            account for the removal of patches (e.g. kernel updates) from a
                            roll-out. Some hosts may have hardware drivers or third party software
                            which depend upon specific kernel versions. This exception process would
                            be handled on a case-by-case basis.</para>
                    </listitem>
                </itemizedlist>
            </para>
        </formalpara>
    </sect1>
    <!-- The following section needs to be revised. It is wordy, and large amount of content difficult to read
        through. Goals: Shorten and reorganize. -->
    <sect1>
        <title>Implementation</title>
        <para>To review, you need to configure SUSE Manager, creating a set of procedures, processes
            and/or tools (scripts) to help with your patch lifecycle management. This includes the
            creation (and optimally an “automatic” creation) of patch archive channels from the SUSE
            provided “updates” channels for the versions of SLES you use. These patch archives will
            be the sources for your patch promotions, but can also be a source to setup testing
            environments based on a patch set rolled out in the past. This could be used to
            troubleshoot an error condition for example, by creating a lab full of hosts patched up
            to any previous patch set. You may also demonstrate and visualize a clear view of
            compliance defined by a time-stamped set of patches.</para>

        <para>You also will create a set of software channels which will be updated when you need to
            roll them out. Each landscape should receive these updates only from a previously
            “validated” landscape. This means a landscape patch set will first get put into DEV,
            tested, then move to QA, undergo tests and finally be moved into the PROD landscape.
            This process will begin anew each quarter, and you will handle exceptions if/when they
            occur.</para>

        <para>Every exception will be tracked by another established process with the constant goal
            of re-mediating any exception and making sure the patch is reintroduced as quickly as
            possible in order to ensure a clear view of compliance.</para>

        <para>Other interruptions to a quarterly roll-out might be the release of a “critical”
            security patch that needs to be deployed more rapidly than once-a-quarter. In order to
            handle this extra schedule, you will need to create an addition channel for any critical
            patches to track them and their roll-out. Critical patches should be considered any CVE
            that has a CVSS score of 7.1 or greater, or otherwise be mandated by your corporate
            security organization.</para>

        <para>For this implementation you will use two different SLES versions, SLES 11 SP3 and SLES
            12. You will plan to use SUSE Manager to assist with your service pack migrations, so
            setting up to account for SLES 11 SP4 initially would be ideal. We also maintain both
            32-bit and 64-bit Intel/AMD architecture versions of SLES 11 SP3 so we will need to
            account for both of them.</para>

        <para>There are 2 different environments we need to manage, Corporate (CORP) and Store
            (STORE). We have created separate SUSE Manager Organizations to allow our systems
            administrators an exclusive view of the hosts they are responsible for. Each SUSE
            Manager Organization has the 3 landscapes (DEV, QA and PROD) that they use for patch
            testing/promotion.</para>

        <para>Activation keys and bootstraps should be created for each SUSE Manager Organization
            (each environment) and each landscape so that hosts can be registered into their
            appropriate, and most likely, permanent role. For example, a bootstrap script will
            register a SLES 11 SP3 (64bit) DEV host into the correct organization and will add the
            appropriate base and child channels that should never have to be manipulated
            again.</para>

        <para>Automation is preferred. As mentioned, the use of scripts or scheduled jobs would
            greatly enhance this solution and make it easier for support staff.</para>
    </sect1>
    <sect1>
        <title>Base Channels and Architecture</title>

        <para>This represents a high-level outline of the architecture and channels:</para>

        <note>
            <title>Tip: Base Channel Naming</title>
            <para>Any Base channel listed can also be a clone tree of the SUSE vendor channels
                therefore should include a prefix in the name. This can aid the handling of service
                pack migrations described during channel creation. See:
                <!-- <link
                        linkend="">Channel Creation</link> -->.</para>
        </note>

        <para>
            <itemizedlist>
                <listitem>
                    <para>SUSE Manager Organization <itemizedlist>
                            <listitem>
                                <para>Default(Main) - 1 <itemizedlist>
                                        <listitem>
                                            <para>32 Bit Archive Channels (Public) <itemizedlist>
                                                  <listitem>
                                                  <para>Q2 - 06-30-2016 - SLES 11 SP3 Updates for
                                                  i586</para>
                                                  </listitem>
                                                  <listitem>
                                                  <para>Q3 - 09-30-2016 - SLES 11 SP3 Updates for
                                                  I586</para>
                                                  </listitem>
                                                </itemizedlist></para>
                                        </listitem>
                                        <listitem>
                                            <para>64 Bit Archive Channels(Public) <itemizedlist>
                                                  <listitem>
                                                  <para>Q2 - 06-30-2016 - SLES 11 SP3 Updates for
                                                  x86_64</para>
                                                  </listitem>
                                                  <listitem>
                                                  <para>Q3 - 09-30-2016 - SLES 11 SP3 Updates for
                                                  x86_64</para>
                                                  </listitem>
                                                  <listitem>
                                                  <para>Q2 - 06-30-2016 - SLES 12 Updates for
                                                  x86_64</para>
                                                  </listitem>
                                                  <listitem>
                                                  <para>Q3 - 09-30-2016 - SLES 12 Updates for
                                                  x86_64</para>
                                                  </listitem>
                                                </itemizedlist></para>
                                        </listitem>
                                        <listitem>
                                            <para>Clone Sets or Child Channels within SUSE Base
                                                Channels:</para>
                                        </listitem>
                                        <listitem>
                                            <para>Base : SLES 11 SP3 Pool for i586 <itemizedlist>
                                                  <listitem>
                                                  <para>DEV - Current Patch Set - SLES 11 SP3
                                                  Updates for i586</para>
                                                  </listitem>
                                                  <listitem>
                                                  <para>QA - Current Patch Set - SLES 11 SP3 Updates
                                                  for i586</para>
                                                  </listitem>
                                                  <listitem>
                                                  <para>PROD - Current Patch Set - SLES 11 SP3
                                                  Updates for i586</para>
                                                  </listitem>
                                                  <listitem>
                                                  <para>Patch Exceptions (DO NOT SUBSCRIBE) - SLES
                                                  11 SP3 i586</para>
                                                  </listitem>
                                                  <listitem>
                                                  <para>Security ASAP Exceptions - SLES 11 SP3
                                                  i586</para>
                                                  </listitem>

                                                </itemizedlist></para>
                                        </listitem>
                                        <listitem>
                                            <para>Base : SLES 11 SP3 Pool for x86_64 <itemizedlist>
                                                  <listitem>
                                                  <para>DEV - Current Patch Set - SLES 11 SP3
                                                  Updates for x86_64</para>
                                                  </listitem>
                                                  <listitem>
                                                  <para>QA - Current Patch Set - SLES 11 SP3 Updates
                                                  for x86_64</para>
                                                  </listitem>
                                                  <listitem>
                                                  <para>PROD - Current Patch Set - SLES 12 Updates
                                                  for x86_64</para>
                                                  </listitem>
                                                  <listitem>
                                                  <para>Patch Exceptions (DO NOT SUBSCRIBE) - SLES
                                                  12 x86_64</para>
                                                  </listitem>
                                                  <listitem>
                                                  <para>Security ASAP Exceptions - SLES 12
                                                  x86_64</para>
                                                  </listitem>
                                                </itemizedlist></para>
                                        </listitem>
                                        <listitem>
                                            <para>Base : SLES 12 Pool for x86_64<itemizedlist>
                                                  <listitem>
                                                  <para>DEV - Current Patch Set - SLES 12 Updates
                                                  for x86_64</para>
                                                  </listitem>
                                                  <listitem>
                                                  <para>QA - Current Patch Set - SLES 12 Updates for
                                                  x86_64</para>
                                                  </listitem>
                                                  <listitem>
                                                  <para>PROD - Current Patch Set - SLES 12 Updates
                                                  for x86_64</para>
                                                  </listitem>
                                                  <listitem>
                                                  <para>Patch Exceptions (DO NOT SUBSCRIBE) - SLES
                                                  12 x86_64</para>
                                                  </listitem>
                                                  <listitem>
                                                  <para>Security ASAP Exceptions - SLES 12
                                                  x86_64</para>
                                                  </listitem>
                                                </itemizedlist></para>
                                        </listitem>
                                        <listitem>
                                            <para>Patch Exceptions Channels (as above)<itemizedlist>
                                                  <listitem>
                                                  <para>Per Base Channel - 1 channel for each
                                                  “Updates” channel:<itemizedlist>
                                                  <listitem>
                                                  <para>Examples:<itemizedlist>
                                                  <listitem>
                                                  <para>Patch Exceptions (DO NOT SUBSCRIBE) - SLES
                                                  11 SP3 i586</para>
                                                  </listitem>
                                                  <listitem>
                                                  <para>Security ASAP Exceptions - SLES 11 SP3
                                                  i586</para>
                                                  </listitem>
                                                  </itemizedlist></para>
                                                  </listitem>
                                                  </itemizedlist></para>
                                                  </listitem>
                                                </itemizedlist></para>
                                        </listitem>
                                    </itemizedlist>
                                </para>
                            </listitem>
                            <listitem>
                                <para>Corporate (CORP) - 2<itemizedlist>
                                        <listitem>
                                            <para>Any public channel will be visible here</para>
                                        </listitem>
                                        <listitem>
                                            <para>Private channels can be shared
                                                per-organization</para>
                                        </listitem>
                                    </itemizedlist></para>
                            </listitem>
                            <listitem>
                                <para>Store (STORE) - 3<itemizedlist>
                                        <listitem>
                                            <para>Any public channel will be visible here</para>
                                        </listitem>
                                        <listitem>
                                            <para>Private channels can be shared
                                                per-organization</para>
                                        </listitem>
                                    </itemizedlist></para>
                            </listitem>
                        </itemizedlist>
                    </para>
                </listitem>
            </itemizedlist>
        </para>
    </sect1>

    <sect1>
        <title>Automation and Process Design</title>
        <para>Automation will include automatic channel clone creation for the Archive channels. To
            best suit a particular company’s use-cases and product usage, a combination of scripts
            (cron and bash) and a configuration file will be used. The archive creation will be
            triggered by a custom cron job as follows. Criteria for dates will determine the exact
            setup. For example, a quarterly schedule could be implemented based on the first or last
            day of a given quarter. If the trigger time is the END of a quarter, it would have to
            consider day 30 on the 3 rd and 9 th months of a calendar (March and September), and day
            31 on the 6 th and 12 th months (June and December). This will require 2 crontab entries
            such as (cron syntax):<itemizedlist>
                <listitem>
                    <para><screen>0 0 30 6,9 * /path/to/archive-create-script</screen></para>
                </listitem>
                <listitem>
                    <para><screen>0 0 31 3,12 * /path/to/archive-create-script</screen></para>
                </listitem>
                <listitem>
                    <para>If the trigger for the quarter is going to happen on the 1 st of a month,
                        then only one crontab entry would be required, for
                        example:<screen>0 0 1 1,4,7,10 * /path/to/archive-create-script</screen></para>
                </listitem>
            </itemizedlist></para>
        <para>The actual “archive-create-script” will also need logic in it to determine the quarter
            it was run and formatting logic to provide the correct syntax for SUSE Manager channel
            cloning, etc. The script should also loop through each architecture and SLES version in
            order to make a full set of archives based on the company’s choices.</para>

        <para>Processes for patch promotion will be created so that administrators can precisely and
            explicitly define when a patch set is moved INTO a given landscape, and just as
            importantly - from WHERE. The easiest method to do this is using a script that leverages
            the XMLRPC API exposed in SUSE Manager. The API contains a softwareChannel method called
            mergePackages and mergeErrata. These two methods can be called with a source channel and
            target channel to quickly take content from one channel and merge the differences into
            another.</para>

        <para>The last process will define a workflow for removing a patch from the promotion
            process - and making sure it is stored to be tracked. These patch exceptions can later
            be reintroduced to a patch rollout calendar as the reason for the exception is
            remediated. In addition to the exception process of REMOVING a patch, there is a similar
            process for ADDING a patch as an emergency dictates.</para>

        <para>Emergency patches will likely always be available in the current SUSE Updates
            channels, but might not have been introduced into an Archive channel yet. As the
            quarterly archive channel creation job is triggered, any available patches would be part
            of an archive set - but for a given point in time, this might have occurred before the
            patch was released - or it may be up to 3 months until a new archive is created that
            contains this recent patch. A method for searching and then copying a patch into a
            target channel will need to be created. This will handle those times when a critical
            patch is released by SUSE but your archive channel won’t get a copy until the quarter is
            up.</para>

        <para>Copying these emergency patches into place doesn’t affect the normal deployments or
            creation of archive channels. The next archive channel creation will also contain this
            patch, and the use of an emergency patch channel with a duplicate patch (in the case of
            merging the same patch later) will not cause any conflicts with a system that already
            has installed it.</para>

        <para>For more information see also: <link linkend="bp.chap.lifecycle.mgr.except.escalation"
                >Exception and Escalation Channels</link></para>

    </sect1>

    <sect1>
        <title>Patch Promotion Cycle</title>
        <para>Understanding how patches (and the packages they include) are obtained from SUSE,
            where they go after download, and how they are arranged within SUSE Manager is key to
            setting up the Advanced Patch Lifecycle system. By default, SUSE Manager arranges its
            channel sets by a particular version and architecture of SUSE Linux Enterprise Server
            and its add-ons or extensions.</para>

        <para>For example, a base set of channels within SUSE Manager for SLES 11 SP3 x86_64
            includes the parent or base channel called a “pool” channel. This channel contains
            packages that are the functional equivalent of the installation DVD for SLES 11 SP3
            64-bit. Under this pool channel are all of the “child” channels which include a channel
            for the SUSE Manager Client packages, called SUSE Manager Tools channel, and an updates
            channel called in this case, SLES 11 SP3 Updates for x86_64.</para>

        <para>A normal set of channels that a managed host subscribes to will include at least a
            parent channel (pool), a SUSE Manager Tools channel, and an Updates channel. In some
            cases like SLES 11 SP2 - this will include the SLES 11 SP1 Pool, the SP1 Updates
            channel, the SP2 Core channel, SP2 Updates, SP2 Extension Store and the SP2 SUSE Manager
            Tools channel.</para>

        <note>
            <title>Long Term Service Pack Support (LTSS)</title>
            <para>Due to SP1 and SP2 both being in their LTSS (Long Term Service and Support) phase,
                there are no longer any non-LTSS updates being created from SUSE. This means that
                any SP1 or SP2 hosts a company might have will need to purchase LTSS and use LTSS
                Updates channels in order to receive further patches and support. For more
                information see: <link xlink:href="www.suse.com/lifecycle"/></para>
        </note>

        <figure>
            <title>Patch Promotion Process</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="patch-promo.png" width="80%"/>
                </imageobject>
            </mediaobject>
        </figure>
    </sect1>

    <sect1 xml:id="bp.chap.lifecycle.mgr.except.escalation">
        <title>Exception and Escalation Channels</title>
        <para>There might be several reasons to delay or remove a patch from a deployment cycle. A
            patch could be causing issues with the stability of a system or systems, it might not
            have passed a testing cycle from the current or previous landscape, or there could be
            some other reason not to deploy it within a patch cycle.</para>

        <para>On the other hand, there might be a reason to deploy a critical patch (one that
            patches a security vulnerability or a debilitating bug) ahead of schedule. Due to the
            critical nature of the patch it needs to go through testing and deployment as fast as
            possible - without waiting for the next quarterly patch cycle.</para>

        <para>In order to handle the periodic removal or addition of these exception patches,
            processes should be created to track them appropriately. While these exceptions are
            being tracked, they will be copied into their own channel containers for safe-keeping,
            accounting and reporting.</para>

        <para>These channels can be created within the Archive base channel or within the cloned
            base channel for the version of SLES that corresponds to the patch exception
            (recommended).</para>

        <para>The process for excluding a patch will be to first copy the patch (and associated
            packages) into the Exception Channel, and then to remove the patch (and associated
            packages) from the current deployment landscape. Optionally it can be removed from the
            current quarter’s archive channel but it is important to realize that the patch will be
            included in the following quarter’s archive as well. It might be tempting to remove it
            from the SUSE Updates channel, but this can often lead to a mishandling or misreporting
            of compliance. It is much better to track and resolve the reasons for the exception in
            the first place. This way, the patch can be reintroduced to the patch deployment
            workflow and remediate any potential security issues or code flaws that the patch was
            created to fix.</para>

        <formalpara>
            <title>Security Escalation Channel and Process</title>
            <para> The process for adding a security patch is similar to the process of excluding
                one. The key difference is that the patch needs to be copied into the Security
                Exception Channel from either the SUSE Updates channel or the latest archive if it
                has been created but not used for a promotion cycle yet. Assuming that this new
                critical security patch has been released in the middle of a rollout phase (you have
                already been promoting the current quarter’s patches and this new one comes out), it
                is likely that this new patch has not yet appeared in an archive.</para>
        </formalpara>

        <para>Another assumption is the need to test this new patch by promoting it through the
            landscapes as any normal patch set, but if necessary it can be copied directly to any
            stage. Simply copy this security patch into the initial landscape (e.g. DEV - Current)
            and follow the normal deploy-test-promote cycles to get it into production. Depending on
            the critical nature of the patch, the normal schedule for testing could be accelerated
            or in rare cases bypassed altogether assuming acceptable risk.</para>

    </sect1>

    <sect1>
        <title>Components to be Created</title>
        <para>The following list provides an overview on what you will be creating to enable
            Advanced Patch Lifecycle Management:<itemizedlist>
                <title>Channels</title>
                <listitem>
                    <para>Archive channels</para>
                </listitem>
                <listitem>
                    <para>Current updates channels</para>
                </listitem>
                <listitem>
                    <para>Exception channels (patch exclusions or security-ASAP)</para>
                </listitem>
                <listitem>
                    <para>Optional SP-Migration clone set</para>
                </listitem>
            </itemizedlist>
            <itemizedlist>
                <title>Activation keys and bootstrap scripts</title>
                <listitem>
                    <para>Per-Organization, Per-SLES version activation keys</para>
                </listitem>
            </itemizedlist>
            <itemizedlist>
                <title>Scripts</title>
                <listitem>
                    <para>Archive creation script</para>
                </listitem>
                <listitem>
                    <para>Archive sources list control file</para>
                </listitem>
                <listitem>
                    <para>Merge Tool python script</para>
                </listitem>
            </itemizedlist>
            <itemizedlist>
                <title>Crontab Entries and Automation</title>
                <listitem>
                    <para>Quarterly (or any other frequency) archive creation call</para>
                </listitem>
            </itemizedlist>
        </para>
    </sect1>

    <sect1>
        <title>Channels</title>
        <para>Several custom channels will be created to support the patch promotion process. These
            channels will store the archives (created as clones of the SUSE Updates channels) and
            they will also store exception patches. For each landscape a custom channel will be
            created to hold patches which have been promoted. These channels will grow in size over
            time as patches are promoted each cycle.</para>

        <para>Each new patch cycle updates the available patches in a given landscape’s “current
            updates” channel. In this way each subsequent patch promotion adds the new updates and
            these can be applied to any hosts subscribed to the channel.</para>

        <para>The exception channels will be populated by managing individual patches, copying them
            from one of the landscape updates channels or from one of the archive channels. Once a
            patch is copied successfully into an exception channel, it can be removed from an
            updates channel or an archive.</para>

        <sect2>
            <title>Creating Archive Channels</title>
            <para>Custom channels are created in SUSE Manager as “new”, blank and empty channels, or
                “clones”. Technically, cloned channels can also be created as empty, but in this
                case we will create the archive channels with content sourced from the SUSE Updates
                channel, the patches and the packages they reference.</para>

            <para>Each archive channel will reside within an empty base channel. Base channels will
                be created for each processor architecture managed by SUSE Manager, for example: <itemizedlist>
                    <listitem>
                        <para>IA-32</para>
                    </listitem>
                    <listitem>
                        <para>x86_64</para>
                    </listitem>
                    <listitem>
                        <para>s390x</para>
                    </listitem>
                    <listitem>
                        <para>PPC</para>
                    </listitem>
                </itemizedlist> Multiple archives matching the different versions of SLES may exist
                in the base channel, but they will all be of the same processor architecture.</para>

            <important>
                <title>Channel Naming</title>
                <para>Failing to label the following channels appropriately will cause the example
                    archive script to fail unless modified.</para>
            </important>

            <procedure>
                <title>Create the Base Archive Channels</title>
                <step>
                    <para>For each processor architecture used by hosts which are managed by SUSE
                        Manager, create empty channels named: <replaceable>32 Bit Archives
                            Channel</replaceable> and <replaceable>64 Bit Archives
                            Channel</replaceable></para>
                </step>
                <step>
                    <para>In the Web UI click <menuchoice>
                            <guimenu>Channels</guimenu>
                            <guimenu>Manage Software Channels</guimenu>
                        </menuchoice> then click the <guibutton>+ Create Channel</guibutton>
                        button.</para>
                </step>
                <step>
                    <para>The channel label <emphasis>must be</emphasis> in the format of
                            <replaceable>architecture-patch-archives-channel</replaceable>, for
                        example the 64-bit channel label should be:
                        <screen>x86_64-patch-archives-channel</screen></para>
                </step>
            </procedure>
        </sect2>
    </sect1>
    <sect1>
        <title>Activation Keys and Bootstrapping</title>
        <para/>
    </sect1>
    <sect1>
        <title>Scripts</title>
        <para/>
    </sect1>
    <sect1>
        <title>Crontab Entries and Automation</title>
        <para/>
    </sect1>


    <sect1>
        <title>Use Cases and Workflows</title>
        <para/>
    </sect1>



</chapter>
